<style>
  .toast-top {
    position: fixed;
    top: 10px; /* Adjust this value as per your preference */
    right: 10px; /* Adjust this value as per your preference */
    z-index: 1050; /* Ensure it's above other content */
}
</style>

{{> header}}

<div class="app-content">

  <!--====== Section 1 ======-->
  <div class="u-s-p-y-1">
    <div class="container">
      <div class="row">
        <div class="col-lg-12">
          <div class="shop-p">
            <div class="shop-p__toolbar u-s-m-b-10">
              <div class="shop-p__meta-wrap u-s-m-b-60">

                {{!-- <span class="shop-p__meta-text-1">FOUND 18 RESULTS</span> --}}
                <div class="shop-p__meta-text-2 text-center">

                  <span style="font-size: large;">OUR PRODUCTS</span>

                  <a class="" href="#"></a>

                  <a class="" href="#"></a>

                  <a class="" href="#"></a></div>
              </div>
              <div class="shop-p__tool-style">
                <div class="tool-style__group u-s-m-b-8">

                  <span class="js-shop-grid-target is-active">Grid</span>

                  <span class="js-shop-list-target">List</span></div>
                
              </div>
            </div>
            <div class="shop-p__collection">
              <div class="row is-grid-active">
                {{#if noProduct}}
                <div class="section__content">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-12 col-md-12 u-s-m-b-30">
                                <div class="empty">
                                    <div class="empty__wrap">

                                        <span class="empty__big-text">SORRY</span>

                                        <span class="empty__text-1">Your search, did not match any products. A partial match of your keywords is listed below.</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                {{else}}
            {{#each products}}
               {{!-- <form action=""> --}}
                <div class="col-lg-3 col-md-4 col-sm-6">
                  <div class="product-m">
                    <div class="product-m__thumb">

                      <a
                      href="/product/{{this._id}}"
                        class="aspect aspect--bg-grey aspect--square u-d-block"
                        style=""
                      >

                        <img
                          class="aspect__img"
                          src="{{this.image}}"
                          alt=""
                        /></a>
                      <div class="product-m__quick-look">

                        <a
                          class="fas fa-search"
                          data-modal="modal"
                          data-modal-id="#quick-look"
                          data-tooltip="tooltip"
                          data-placement="top"
                          title="Quick Look"
                        ></a></div>
                      <div class="product-m__add-cart">
                       
                        <a
                          href="/addToCart/{{this._id}}"
                          id="addToCartButton"
                          class="btn--e-brand custom-hover addToCartButton"
                          onMouseOver="this.style.color='#fff'"
                          data-modal-id="#add-to-cart"
                        >add to cart</a></div>
                    </div>
                    <div class="product-m__content">
                      <div class="product-m__category">

                        <a href="">{{this.brand}}</a></div>
                      <div class="product-m__name">

                        <a href="">{{this.name}}</a></div>
                      <div class="product-m__rating gl-rating-style"><i
                          class="fas fa-star"
                        ></i><i class="fas fa-star"></i><i
                          class="fas fa-star-half-alt"
                        ></i><i class="far fa-star"></i><i
                          class="far fa-star"
                        ></i>

                        <span class="product-m__review">(23)</span></div>
                      <div class="product-m__price">â‚¹{{this.price}}</div>
                      <div class="product-m__hover">
                        <div class="product-m__preview-description">

                          <span>Lorem Ipsum is simply dummy text of the printing
                            and typesetting industry. Lorem Ipsum has been the
                            industry's standard dummy text ever since the 1500s,
                            when an unknown printer took a galley of type and
                            scrambled it to make a type specimen book.</span></div>
                        <div class="product-m__wishlist">

                          <a
                            class="far fa-heart addToWishlistButton"
                            href="/user/addWishlist/{{this._id}}"
                            data-tooltip="tooltip"
                            data-coupon-id="{{this._id}}"
                            data-placement="top"
                            title="Add to Wishlist"
                          ></a></div>
                      </div>
                    </div>
                  </div>
                </div>
               
                </form>                                            
            {{/each}}
            {{/if}}
              </div>
            </div>
            <div class="u-s-p-y-60">

              <!--====== Pagination ======-->
              {{!-- <ul class="shop-p__pagination">
                <li class="is-active">

                  <a href="shop-grid-full.html">1</a></li>
                <li>

                  <a href="shop-grid-full.html">2</a></li>
                <li>

                  <a href="shop-grid-full.html">3</a></li>
                <li>

                  <a href="shop-grid-full.html">4</a></li>
                <li>

                  <a
                    class="fas fa-angle-right"
                    href="shop-grid-full.html"
                  ></a></li>
              </ul> --}}
              <!--====== End - Pagination ======-->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!--====== End - Section 1 ======-->
</div>


{{#if isUser}}

<div class="toast text-bg-success" id="myModal" role="alert">
  <div class="toast-body">
    <div class="d-flex gap-4">
      <span><i class="fa-solid fa-circle-check fa-lg"></i></span>
      <div class="d-flex flex-grow-1 align-items-center">
        <span class="fw-semibold">Welcome to the room</span>
        <!-- Other content for the toast -->
      </div>
    </div>
  </div>
</div>
  {{/if}}


<script>
   document.getElementById('addToCartButton').addEventListener('click', function() {
    // Show the toast
    document.getElementById('myModal').style.display = 'block';

    // Hide the toast after a certain duration (e.g., 3 seconds)
    setTimeout(function() {
      document.getElementById('myModal').style.display = 'none';
    }, 3000);
  });
</script>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  $(document).ready(function() {
  const addToCartButton = document.querySelectorAll('.addToCartButton');

  addToCartButton.forEach(function(button) {
    button.addEventListener("click", function(event) {
      event.preventDefault();

      const addToCartUrl = this.getAttribute('href');

      $.ajax({
        type: 'GET',
        url: addToCartUrl,
        success: function(response) {
          Swal.fire({
            position: "top-middle",
            icon: "success",
            title: "Item added to cart",
            showConfirmButton: false,
            timer: 1500
          });
        },
        error: function(error) {
          console.error('Error adding item to cart:', error);
        }
      });
    });
  });
});

$(document).ready(function(){
  const addWishListButton = document.querySelectorAll('.addToWishlistButton');
  addWishListButton.forEach(function(button){
    button.addEventListener('click', function(event){
      event.preventDefault();
      const addToWishlistUrl = this.getAttribute('href');
      const proId = this.getAttribute('data-coupon-id')
      $.ajax({
        type: 'GET',
        url: addToWishlistUrl,
        success: function(response){
          const wishlist = response.addedWishlist.wishlist
          let product = wishlist.filter((item)=> {
            if(proId == item.product_id) {
              return item.product_id
            }
          })
          if(product.length < 1){

          Swal.fire({
            position: "top-middle",
            icon: "success",
            title: "Item removed from Wishlist",
            showConfirmButton: false,
            timer: 1500
          });
          }else{
          Swal.fire({
            position: "top-middle",
            icon: "success",
            title: "Item added to Wishlist",
            showConfirmButton: false,
            timer: 1500
          });

          }
        }
      })
    })
  })
})

</script>


{{!-- {{> footer}} --}}